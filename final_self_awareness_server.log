2025-08-04 18:49:15,579 - asyncio - DEBUG - Using selector: KqueueSelector
INFO:     Started server process [11848]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
ðŸ”§ MODULE LOADED: document_tools.py at /Users/saadahmed/Desktop/Apps/AWS_Extra/Agent/tools/document_tools.py
INFO:     127.0.0.1:61317 - "GET /health HTTP/1.1" 200 OK
2025-08-04 18:49:31,239 - orchestrator_v2.state_management - INFO - Loaded persistent state from disk
2025-08-04 18:49:31,557 - orchestrator_v2.agent_identity - INFO - Initialized AI Finance and Risk Agent v2.0.0
2025-08-04 18:49:31,561 - tools.synthesis_tools - INFO - Synthesis LLM initialized successfully with model: claude-3-5-sonnet-20241022
2025-08-04 18:49:31,995 - matplotlib - DEBUG - matplotlib data path: /Users/saadahmed/Desktop/Apps/AWS_Extra/Agent/venv/lib/python3.13/site-packages/matplotlib/mpl-data
2025-08-04 18:49:32,000 - matplotlib - DEBUG - CONFIGDIR=/Users/saadahmed/.matplotlib
2025-08-04 18:49:32,000 - matplotlib - DEBUG - interactive is False
2025-08-04 18:49:32,000 - matplotlib - DEBUG - platform is darwin
2025-08-04 18:49:32,048 - matplotlib - DEBUG - CACHEDIR=/Users/saadahmed/.matplotlib
2025-08-04 18:49:32,050 - matplotlib.font_manager - DEBUG - Using fontManager instance from /Users/saadahmed/.matplotlib/fontlist-v390.json
2025-08-04 18:49:33,133 - orchestrator_v2.tool_registry - INFO - Registered tool: get_agent_capabilities (category: ToolReliability.HIGH)
2025-08-04 18:49:33,133 - orchestrator_v2.tool_registry - INFO - Registered tool: get_available_documents (category: ToolReliability.HIGH)
2025-08-04 18:49:33,133 - orchestrator_v2.tool_registry - INFO - Registered tool: get_workflow_information (category: ToolReliability.HIGH)
2025-08-04 18:49:33,134 - orchestrator_v2.state_management - INFO - Loaded persistent state from disk
2025-08-04 18:49:33,134 - orchestrator_v2.orchestrator_v2 - INFO - Orchestrator 2.0 LLM initialized: claude-3-5-sonnet-20241022
2025-08-04 18:49:33,134 - orchestrator_v2.planning_engine - INFO - Fixed Planning Engine initialized
2025-08-04 18:49:33,134 - orchestrator_v2.planning_engine_enhanced - INFO - Enhanced Planning Engine initialized with AI Finance and Risk Agent
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: upload_document (category: document)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: discover_document_structure (category: document)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: search_uploaded_docs (category: search)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: search_multiple_docs (category: search)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: get_all_documents (category: document)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: remove_document (category: document)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: synthesize_content (category: synthesis)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: search_knowledge_base (category: search)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: search_conversation_history (category: search)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: execute_python_code (category: computation)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: process_table_data (category: computation)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: calculate_statistics (category: computation)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: create_chart (category: visualization)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: create_wordcloud (category: visualization)
2025-08-04 18:49:33,135 - orchestrator_v2.tool_registry - INFO - Registered tool: create_statistical_plot (category: visualization)
2025-08-04 18:49:33,136 - orchestrator_v2.tool_registry - INFO - Registered tool: create_comparison_chart (category: visualization)
2025-08-04 18:49:33,136 - orchestrator_v2.tool_registry - INFO - Registered tool: analyze_text_metrics (category: analysis)
2025-08-04 18:49:33,136 - orchestrator_v2.tool_registry - INFO - Registered tool: extract_key_phrases (category: analysis)
2025-08-04 18:49:33,136 - orchestrator_v2.tool_registry - INFO - Registered tool: analyze_sentiment (category: analysis)
2025-08-04 18:49:33,136 - orchestrator_v2.tool_registry - INFO - Registered tool: extract_entities (category: analysis)
2025-08-04 18:49:33,136 - orchestrator_v2.orchestrator_v2 - INFO - Registered 23 tools across 7 categories
2025-08-04 18:49:33,136 - orchestrator_v2.orchestrator_v2 - INFO - Orchestrator 2.0 initialized successfully
2025-08-04 18:49:33,136 - orchestrator_integration - INFO - âœ… Orchestrator 2.0 initialized successfully
INFO:     127.0.0.1:61371 - "GET /system/status HTTP/1.1" 200 OK
2025-08-04 18:49:33,141 - __main__ - INFO - Frontend Chat request - session: terminal-test-session, query: --query what documents do you have access to?, correlation_id: 754baacf-823d-4968-b3d8-adbf703aa5c8
2025-08-04 18:49:33,142 - __main__ - INFO - Loaded memory context - short_term: 9, summaries: 3
2025-08-04 18:49:33,142 - orchestrator_integration - INFO - ðŸš€ Using Orchestrator 2.0
2025-08-04 18:49:33,142 - orchestrator_v2.orchestrator_v2 - INFO - ðŸš€ Orchestrator 2.0 executing query: --query what documents do you have access to?...
2025-08-04 18:49:33,142 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Execution ID: 98f44678-a7b3-4ea3-8433-c4c62ec41d6e, Strategy: adaptive
2025-08-04 18:49:33,142 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ¤” Generating execution plan...
2025-08-04 18:49:33,142 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸŽ¯ AI Finance and Risk Agent creating plan for: '--query what documents do you have access to?...'
2025-08-04 18:49:33,142 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ“‹ Classified workflow: system_awareness
2025-08-04 18:49:33,142 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ’¾ Primary memory source: knowledge_base_embeddings
2025-08-04 18:49:33,142 - orchestrator_v2.planning_engine_enhanced - INFO - âœ… Created system_awareness plan with 2 steps
2025-08-04 18:49:33,143 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Created plan with 2 steps
2025-08-04 18:49:33,143 - orchestrator_v2.orchestrator_v2 - INFO - âš¡ Starting plan execution...
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - INFO - Starting execution of plan: system_awareness_1754347773
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - INFO - Executing step: get_system_info (get_available_documents)
2025-08-04 18:49:33,143 - tools.system_tools - INFO - Retrieving available documents for self-awareness query
2025-08-04 18:49:33,143 - tools.system_tools - ERROR - Error retrieving available documents: 'PersistentDocumentStore' object has no attribute 'items'
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - INFO - Step 'get_system_info' completed successfully
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - INFO - Executing step: synthesize_system_info (synthesize_content)
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:49:33,143 - orchestrator_v2.execution_engine - INFO - Plan execution completed. Success: 1, Failed: 1
2025-08-04 18:49:33,189 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-666cbcc1-13bf-40f4-b1fc-8e361d80097f', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '\nUser Query: "--query what documents do you have access to?"\n\nI have gathered the following information using get_available_documents:\n\n{\'error\': "Unable to retrieve document information: \'PersistentDocumentStore\' object has no attribute \'items\'", \'total_documents\': 0, \'documents\': []}\n\nPlease create a comprehensive, well-structured response that directly answers the user\'s query using this information.\n\nRequirements:\n- Start with a direct answer to their question\n- Include the most relevant details from the information\n- Be concise but thorough  \n- Use a professional, helpful tone\n- Structure the response logically\n- If the information contains raw document chunks, synthesize them into readable prose\n\nFinal Response:'}], 'model': 'claude-3-5-sonnet-20241022', 'temperature': 0.0}}
2025-08-04 18:49:33,190 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-08-04 18:49:33,194 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-08-04 18:49:33,232 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x141779940>
2025-08-04 18:49:33,232 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x141725e20> server_hostname='api.anthropic.com' timeout=None
2025-08-04 18:49:33,257 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x141673110>
2025-08-04 18:49:33,257 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-04 18:49:33,258 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-04 18:49:33,258 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-04 18:49:33,258 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-04 18:49:33,258 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-04 18:49:36,478 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 22:49:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'160000'), (b'anthropic-ratelimit-input-tokens-remaining', b'160000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-08-04T22:49:34Z'), (b'anthropic-ratelimit-output-tokens-limit', b'32000'), (b'anthropic-ratelimit-output-tokens-remaining', b'32000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-08-04T22:49:36Z'), (b'anthropic-ratelimit-requests-limit', b'2000'), (b'anthropic-ratelimit-requests-remaining', b'1999'), (b'anthropic-ratelimit-requests-reset', b'2025-08-04T22:49:33Z'), (b'anthropic-ratelimit-tokens-limit', b'192000'), (b'anthropic-ratelimit-tokens-remaining', b'192000'), (b'anthropic-ratelimit-tokens-reset', b'2025-08-04T22:49:34Z'), (b'request-id', b'req_011CRoVA9ceF92ewHzm47kAm'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'31219faf-91cc-482b-93f4-cc5aadc25785'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96a19bcf7b30ab0c-YYZ'), (b'Content-Encoding', b'gzip')])
2025-08-04 18:49:36,480 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-04 18:49:36,480 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-04 18:49:36,480 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-04 18:49:36,480 - httpcore.http11 - DEBUG - response_closed.started
2025-08-04 18:49:36,481 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-04 18:49:36,481 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 04 Aug 2025 22:49:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '160000', 'anthropic-ratelimit-input-tokens-remaining': '160000', 'anthropic-ratelimit-input-tokens-reset': '2025-08-04T22:49:34Z', 'anthropic-ratelimit-output-tokens-limit': '32000', 'anthropic-ratelimit-output-tokens-remaining': '32000', 'anthropic-ratelimit-output-tokens-reset': '2025-08-04T22:49:36Z', 'anthropic-ratelimit-requests-limit': '2000', 'anthropic-ratelimit-requests-remaining': '1999', 'anthropic-ratelimit-requests-reset': '2025-08-04T22:49:33Z', 'anthropic-ratelimit-tokens-limit': '192000', 'anthropic-ratelimit-tokens-remaining': '192000', 'anthropic-ratelimit-tokens-reset': '2025-08-04T22:49:34Z', 'request-id': 'req_011CRoVA9ceF92ewHzm47kAm', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '31219faf-91cc-482b-93f4-cc5aadc25785', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '96a19bcf7b30ab0c-YYZ', 'content-encoding': 'gzip'})
2025-08-04 18:49:36,481 - anthropic._base_client - DEBUG - request_id: req_011CRoVA9ceF92ewHzm47kAm
2025-08-04 18:49:36,492 - orchestrator_v2.state_management - DEBUG - Cleaned up execution state for: 98f44678-a7b3-4ea3-8433-c4c62ec41d6e
2025-08-04 18:49:36,492 - orchestrator_v2.orchestrator_v2 - INFO - âœ… Execution completed with 0.40 confidence
2025-08-04 18:49:36,492 - orchestrator_integration - INFO - âœ… Orchestrator 2.0 completed with 0.40 confidence
2025-08-04 18:49:36,496 - __main__ - INFO - Added assistant response to memory - length: 602
2025-08-04 18:49:36,496 - __main__ - INFO - Chat response generated - session: terminal-test-session, processing_time: 3350ms, correlation_id: 754baacf-823d-4968-b3d8-adbf703aa5c8
ðŸ¤– Self-awareness query detected â†’ SYSTEM_AWARENESS
ðŸ”§ SYNTHESIS DEBUG: resolved_params={'documents': {'error': "Unable to retrieve document information: 'PersistentDocumentStore' object has no attribute 'items'", 'total_documents': 0, 'documents': []}, 'query': '--query what documents do you have access to?', 'synthesis_type': 'system_awareness'}
ðŸ”§ SYNTHESIS DEBUG: available step_outputs=['get_system_info']
INFO:     127.0.0.1:61394 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:61489 - "GET /system/status HTTP/1.1" 200 OK
2025-08-04 18:49:47,261 - __main__ - INFO - Frontend Chat request - session: terminal-test-session, query: --query what tools do you have access to?, correlation_id: bcb2c1eb-db2c-43f2-822f-985e38a91d72
2025-08-04 18:49:47,262 - __main__ - INFO - Loaded memory context - short_term: 6, summaries: 3
2025-08-04 18:49:47,262 - orchestrator_integration - INFO - ðŸš€ Using Orchestrator 2.0
2025-08-04 18:49:47,262 - orchestrator_v2.orchestrator_v2 - INFO - ðŸš€ Orchestrator 2.0 executing query: --query what tools do you have access to?...
2025-08-04 18:49:47,262 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Execution ID: e945c7c4-8516-40dd-8c84-7a6f88206e9a, Strategy: adaptive
2025-08-04 18:49:47,262 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ¤” Generating execution plan...
2025-08-04 18:49:47,262 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸŽ¯ AI Finance and Risk Agent creating plan for: '--query what tools do you have access to?...'
2025-08-04 18:49:47,262 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ“‹ Classified workflow: system_awareness
2025-08-04 18:49:47,262 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ’¾ Primary memory source: knowledge_base_embeddings
2025-08-04 18:49:47,262 - orchestrator_v2.planning_engine_enhanced - INFO - âœ… Created system_awareness plan with 2 steps
2025-08-04 18:49:47,262 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Created plan with 2 steps
2025-08-04 18:49:47,262 - orchestrator_v2.orchestrator_v2 - INFO - âš¡ Starting plan execution...
2025-08-04 18:49:47,262 - orchestrator_v2.execution_engine - INFO - Starting execution of plan: system_awareness_1754347787
2025-08-04 18:49:47,263 - orchestrator_v2.execution_engine - INFO - Executing step: get_system_info (get_agent_capabilities)
2025-08-04 18:49:47,263 - tools.system_tools - INFO - Retrieving agent capabilities for self-awareness query
2025-08-04 18:49:47,266 - orchestrator_v2.execution_engine - INFO - Step 'get_system_info' completed successfully
2025-08-04 18:49:47,266 - orchestrator_v2.execution_engine - INFO - Executing step: synthesize_system_info (synthesize_content)
2025-08-04 18:49:47,266 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:49:47,266 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:49:47,266 - orchestrator_v2.execution_engine - INFO - Plan execution completed. Success: 1, Failed: 1
2025-08-04 18:49:47,267 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-77dcdeed-dbe5-47b1-8e3b-ba5a3cfe0617', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '\nUser Query: "--query what tools do you have access to?"\n\nI have gathered the following information using get_agent_capabilities:\n\n{\'agent_identity\': {\'name\': \'AI Finance and Risk Agent\', \'version\': \'2.0.0\', \'specialization\': \'Financial Analysis, Risk Assessment, and Productivity\'}, \'core_capabilities\': [\'Document Analysis & Synthesis\', \'Multi-Document Financial Comparison\', \'Q&A with Comprehensive Fallback Chain\', \'Progressive Data Analysis\', \'Memory Search\', \'System Self-Awareness\'], \'workflow_types\': [\'document_analysis\', \'multi_doc_comparison\', \'qa_fallback_chain\', \'data_analysis\', \'memory_search\', \'system_awareness\'], \'memory_sources\': [\'uploaded_documents\', \'knowledge_base_embeddings\', \'long_term_conversation\', \'llm_knowledge_base\'], \'document_access\': {\'has_document_store\': True, \'total_documents\': 6, \'supported_formats\': [\'PDF\', \'DOCX\', \'TXT\', \'CSV\', \'Excel (multi-sheet)\'], \'sample_documents\': [\'20250804_165506_263c93f7-5bcb-4741-b4f2-a6d0fff1aa15_car24_chpt1_0.pdf\', \'20250804_165507_11ec1b2f-46d1-4b7a-9bb8-d9308689a671_car24_chpt7.pdf\', \'20250804_165511_9eaada37-d793-4331-9f62-5ea15b61a1be_20250801_215126_40e96e22-a0e5-41e0-a232-5f2478768aad_riskandfinace.pdf\']}, \'available_tools\': {\'document_processing\': [\'search_uploaded_docs - Search and retrieve uploaded documents\', \'upload_document - Process and store new documents (PDF, DOCX, TXT, CSV, Excel)\', \'synthesize_content - Generate analysis and summaries from documents\'], \'data_analysis\': [\'analyze_csv_data - Process and analyze CSV files\', \'analyze_excel_data - Process multi-sheet Excel files (1 sheet = 1 chunk)\', \'generate_statistics - Calculate financial metrics and ratios\', \'create_visualizations - Generate charts and graphs\'], \'financial_analysis\': [\'financial_ratio_analysis - Calculate profitability, liquidity, efficiency ratios\', \'risk_assessment - Identify and evaluate financial risks\', \'comparative_analysis - Compare multiple financial documents or datasets\'], \'memory_and_search\': [\'search_conversation_history - Access previous conversation context\', \'search_multiple_docs - Compare and analyze multiple documents simultaneously\'\n\nPlease create a comprehensive, well-structured response that directly answers the user\'s query using this information.\n\nRequirements:\n- Start with a direct answer to their question\n- Include the most relevant details from the information\n- Be concise but thorough  \n- Use a professional, helpful tone\n- Structure the response logically\n- If the information contains raw document chunks, synthesize them into readable prose\n\nFinal Response:'}], 'model': 'claude-3-5-sonnet-20241022', 'temperature': 0.0}}
2025-08-04 18:49:47,267 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-08-04 18:49:47,267 - httpcore.connection - DEBUG - close.started
2025-08-04 18:49:47,267 - httpcore.connection - DEBUG - close.complete
2025-08-04 18:49:47,268 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-08-04 18:49:47,283 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1417fc7d0>
2025-08-04 18:49:47,283 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x141725e20> server_hostname='api.anthropic.com' timeout=None
2025-08-04 18:49:47,306 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1416ff100>
2025-08-04 18:49:47,307 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-04 18:49:47,307 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-04 18:49:47,307 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-04 18:49:47,307 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-04 18:49:47,307 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-04 18:49:51,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 22:49:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'160000'), (b'anthropic-ratelimit-input-tokens-remaining', b'160000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-08-04T22:49:48Z'), (b'anthropic-ratelimit-output-tokens-limit', b'32000'), (b'anthropic-ratelimit-output-tokens-remaining', b'32000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-08-04T22:49:51Z'), (b'anthropic-ratelimit-requests-limit', b'2000'), (b'anthropic-ratelimit-requests-remaining', b'1999'), (b'anthropic-ratelimit-requests-reset', b'2025-08-04T22:49:47Z'), (b'anthropic-ratelimit-tokens-limit', b'192000'), (b'anthropic-ratelimit-tokens-remaining', b'192000'), (b'anthropic-ratelimit-tokens-reset', b'2025-08-04T22:49:48Z'), (b'request-id', b'req_011CRoVBBgSwoSrZHTqwMHpr'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'31219faf-91cc-482b-93f4-cc5aadc25785'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96a19c274bf3ac46-YYZ'), (b'Content-Encoding', b'gzip')])
2025-08-04 18:49:51,326 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-04 18:49:51,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-04 18:49:51,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-04 18:49:51,326 - httpcore.http11 - DEBUG - response_closed.started
2025-08-04 18:49:51,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-04 18:49:51,327 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 04 Aug 2025 22:49:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '160000', 'anthropic-ratelimit-input-tokens-remaining': '160000', 'anthropic-ratelimit-input-tokens-reset': '2025-08-04T22:49:48Z', 'anthropic-ratelimit-output-tokens-limit': '32000', 'anthropic-ratelimit-output-tokens-remaining': '32000', 'anthropic-ratelimit-output-tokens-reset': '2025-08-04T22:49:51Z', 'anthropic-ratelimit-requests-limit': '2000', 'anthropic-ratelimit-requests-remaining': '1999', 'anthropic-ratelimit-requests-reset': '2025-08-04T22:49:47Z', 'anthropic-ratelimit-tokens-limit': '192000', 'anthropic-ratelimit-tokens-remaining': '192000', 'anthropic-ratelimit-tokens-reset': '2025-08-04T22:49:48Z', 'request-id': 'req_011CRoVBBgSwoSrZHTqwMHpr', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '31219faf-91cc-482b-93f4-cc5aadc25785', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '96a19c274bf3ac46-YYZ', 'content-encoding': 'gzip'})
2025-08-04 18:49:51,327 - anthropic._base_client - DEBUG - request_id: req_011CRoVBBgSwoSrZHTqwMHpr
2025-08-04 18:49:51,328 - orchestrator_v2.state_management - DEBUG - Cleaned up execution state for: e945c7c4-8516-40dd-8c84-7a6f88206e9a
2025-08-04 18:49:51,328 - orchestrator_v2.orchestrator_v2 - INFO - âœ… Execution completed with 0.40 confidence
2025-08-04 18:49:51,328 - orchestrator_integration - INFO - âœ… Orchestrator 2.0 completed with 0.40 confidence
2025-08-04 18:49:51,329 - __main__ - INFO - Added assistant response to memory - length: 1163
2025-08-04 18:49:51,329 - __main__ - INFO - Chat response generated - session: terminal-test-session, processing_time: 4066ms, correlation_id: bcb2c1eb-db2c-43f2-822f-985e38a91d72
ðŸ¤– Self-awareness query detected â†’ SYSTEM_AWARENESS
ðŸ”§ SYNTHESIS DEBUG: resolved_params={'documents': {'agent_identity': {'name': 'AI Finance and Risk Agent', 'version': '2.0.0', 'specialization': 'Financial Analysis, Risk Assessment, and Productivity'}, 'core_capabilities': ['Document Analysis & Synthesis', 'Multi-Document Financial Comparison', 'Q&A with Comprehensive Fallback Chain', 'Progressive Data Analysis', 'Memory Search', 'System Self-Awareness'], 'workflow_types': ['document_analysis', 'multi_doc_comparison', 'qa_fallback_chain', 'data_analysis', 'memory_search', 'system_awareness'], 'memory_sources': ['uploaded_documents', 'knowledge_base_embeddings', 'long_term_conversation', 'llm_knowledge_base'], 'document_access': {'has_document_store': True, 'total_documents': 6, 'supported_formats': ['PDF', 'DOCX', 'TXT', 'CSV', 'Excel (multi-sheet)'], 'sample_documents': ['20250804_165506_263c93f7-5bcb-4741-b4f2-a6d0fff1aa15_car24_chpt1_0.pdf', '20250804_165507_11ec1b2f-46d1-4b7a-9bb8-d9308689a671_car24_chpt7.pdf', '20250804_165511_9eaada37-d793-4331-9f62-5ea15b61a1be_20250801_215126_40e96e22-a0e5-41e0-a232-5f2478768aad_riskandfinace.pdf']}, 'available_tools': {'document_processing': ['search_uploaded_docs - Search and retrieve uploaded documents', 'upload_document - Process and store new documents (PDF, DOCX, TXT, CSV, Excel)', 'synthesize_content - Generate analysis and summaries from documents'], 'data_analysis': ['analyze_csv_data - Process and analyze CSV files', 'analyze_excel_data - Process multi-sheet Excel files (1 sheet = 1 chunk)', 'generate_statistics - Calculate financial metrics and ratios', 'create_visualizations - Generate charts and graphs'], 'financial_analysis': ['financial_ratio_analysis - Calculate profitability, liquidity, efficiency ratios', 'risk_assessment - Identify and evaluate financial risks', 'comparative_analysis - Compare multiple financial documents or datasets'], 'memory_and_search': ['search_conversation_history - Access previous conversation context', 'search_multiple_docs - Compare and analyze multiple documents simultaneously', 'search_knowledge_base - Access external knowledge resources']}, 'system_status': 'operational'}, 'query': '--query what tools do you have access to?', 'synthesis_type': 'system_awareness'}
ðŸ”§ SYNTHESIS DEBUG: available step_outputs=['get_system_info']
INFO:     127.0.0.1:61491 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:61592 - "GET /system/status HTTP/1.1" 200 OK
2025-08-04 18:50:01,683 - __main__ - INFO - Frontend Chat request - session: terminal-test-session, query: --query what workflows do you have access to?, correlation_id: 9c9bbdf2-7da7-4827-8e1e-a5352733b1e5
2025-08-04 18:50:01,684 - __main__ - INFO - Loaded memory context - short_term: 8, summaries: 3
2025-08-04 18:50:01,685 - orchestrator_integration - INFO - ðŸš€ Using Orchestrator 2.0
2025-08-04 18:50:01,685 - orchestrator_v2.orchestrator_v2 - INFO - ðŸš€ Orchestrator 2.0 executing query: --query what workflows do you have access to?...
2025-08-04 18:50:01,685 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Execution ID: d9e67a3a-b05a-45b6-a52e-d819e54d09bb, Strategy: adaptive
2025-08-04 18:50:01,685 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ¤” Generating execution plan...
2025-08-04 18:50:01,685 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸŽ¯ AI Finance and Risk Agent creating plan for: '--query what workflows do you have access to?...'
2025-08-04 18:50:01,685 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ“‹ Classified workflow: system_awareness
2025-08-04 18:50:01,685 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ’¾ Primary memory source: knowledge_base_embeddings
2025-08-04 18:50:01,685 - orchestrator_v2.planning_engine_enhanced - INFO - âœ… Created system_awareness plan with 2 steps
2025-08-04 18:50:01,685 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Created plan with 2 steps
2025-08-04 18:50:01,685 - orchestrator_v2.orchestrator_v2 - INFO - âš¡ Starting plan execution...
2025-08-04 18:50:01,685 - orchestrator_v2.execution_engine - INFO - Starting execution of plan: system_awareness_1754347801
2025-08-04 18:50:01,685 - orchestrator_v2.execution_engine - INFO - Executing step: get_system_info (get_workflow_information)
2025-08-04 18:50:01,685 - tools.system_tools - INFO - Retrieving workflow information for self-awareness query
2025-08-04 18:50:01,685 - orchestrator_v2.execution_engine - INFO - Step 'get_system_info' completed successfully
2025-08-04 18:50:01,685 - orchestrator_v2.execution_engine - INFO - Executing step: synthesize_system_info (synthesize_content)
2025-08-04 18:50:01,686 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:50:01,686 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:50:01,686 - orchestrator_v2.execution_engine - INFO - Plan execution completed. Success: 1, Failed: 1
2025-08-04 18:50:01,686 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-0fee47ac-c2ad-49dd-b322-fc0b90036828', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '\nUser Query: "--query what workflows do you have access to?"\n\nI have gathered the following information using get_workflow_information:\n\n{\'total_workflows\': 5, \'workflows\': {\'document_analysis\': {\'name\': \'Document Analysis\', \'description\': \'Comprehensive analysis of single documents (PDF, DOCX, TXT)\', \'use_cases\': [\'Analyze financial reports and statements\', \'Extract key insights from risk assessments\', \'Summarize regulatory documents\', \'Answer questions about document content\'], \'example_queries\': ["What is the company\'s profitability?", \'Summarize the risk factors\', \'Analyze this financial statement\']}, \'data_analysis\': {\'name\': \'Data Analysis\', \'description\': \'Statistical analysis of CSV and Excel files with financial calculations\', \'use_cases\': [\'Process multi-sheet Excel financial models\', \'Calculate financial ratios and metrics\', \'Generate data visualizations and charts\', \'Perform statistical analysis on datasets\'], \'example_queries\': [\'Analyze this financial data\', \'What are the profitability trends?\', \'Create a summary of each table\']}, \'multi_doc_comparison\': {\'name\': \'Multi-Document Comparison\', \'description\': \'Compare and contrast multiple documents for similarities and differences\', \'use_cases\': [\'Compare financial statements across periods\', \'Analyze different company performance\', \'Identify trends across multiple reports\', \'Benchmark analysis between documents\'], \'example_queries\': [\'Compare these two financial reports\', \'What are the similarities and differences?\', \'How do these companies compare?\']}, \'memory_search\': {\'name\': \'Memory Search\', \'description\': \'Search previous conversations and build on prior context\', \'use_cases\': [\'Recall previous analysis results\', \'Continue interrupted conversations\', \'Reference earlier calculations\', \'Build on previous insights\'], \'example_queries\': [\'What did we discuss about risk?\', \'Remember our previous analysis\', \'Recall what we said about profitability\']}, \'qa_fallback_chain\': {\'name\': \'Q&A Fallback Chain\', \'description\': \'Answer general questions using comprehensive knowledge sources\', \'use_cases\': [\'General financial knowledge questions\', \'T\n\nPlease create a comprehensive, well-structured response that directly answers the user\'s query using this information.\n\nRequirements:\n- Start with a direct answer to their question\n- Include the most relevant details from the information\n- Be concise but thorough  \n- Use a professional, helpful tone\n- Structure the response logically\n- If the information contains raw document chunks, synthesize them into readable prose\n\nFinal Response:'}], 'model': 'claude-3-5-sonnet-20241022', 'temperature': 0.0}}
2025-08-04 18:50:01,687 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-08-04 18:50:01,687 - httpcore.connection - DEBUG - close.started
2025-08-04 18:50:01,687 - httpcore.connection - DEBUG - close.complete
2025-08-04 18:50:01,687 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-08-04 18:50:01,701 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1416fdba0>
2025-08-04 18:50:01,701 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x141725e20> server_hostname='api.anthropic.com' timeout=None
2025-08-04 18:50:01,724 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1417667b0>
2025-08-04 18:50:01,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-04 18:50:01,725 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-04 18:50:01,725 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-04 18:50:01,725 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-04 18:50:01,725 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-04 18:50:06,211 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 22:50:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'160000'), (b'anthropic-ratelimit-input-tokens-remaining', b'160000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-08-04T22:50:02Z'), (b'anthropic-ratelimit-output-tokens-limit', b'32000'), (b'anthropic-ratelimit-output-tokens-remaining', b'32000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-08-04T22:50:06Z'), (b'anthropic-ratelimit-requests-limit', b'2000'), (b'anthropic-ratelimit-requests-remaining', b'1999'), (b'anthropic-ratelimit-requests-reset', b'2025-08-04T22:50:01Z'), (b'anthropic-ratelimit-tokens-limit', b'192000'), (b'anthropic-ratelimit-tokens-remaining', b'192000'), (b'anthropic-ratelimit-tokens-reset', b'2025-08-04T22:50:02Z'), (b'request-id', b'req_011CRoVCFNUTWPDmUoDhcPSS'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'31219faf-91cc-482b-93f4-cc5aadc25785'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96a19c8168feac0c-YYZ'), (b'Content-Encoding', b'gzip')])
2025-08-04 18:50:06,211 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-04 18:50:06,211 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-04 18:50:06,212 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-04 18:50:06,212 - httpcore.http11 - DEBUG - response_closed.started
2025-08-04 18:50:06,212 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-04 18:50:06,212 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 04 Aug 2025 22:50:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '160000', 'anthropic-ratelimit-input-tokens-remaining': '160000', 'anthropic-ratelimit-input-tokens-reset': '2025-08-04T22:50:02Z', 'anthropic-ratelimit-output-tokens-limit': '32000', 'anthropic-ratelimit-output-tokens-remaining': '32000', 'anthropic-ratelimit-output-tokens-reset': '2025-08-04T22:50:06Z', 'anthropic-ratelimit-requests-limit': '2000', 'anthropic-ratelimit-requests-remaining': '1999', 'anthropic-ratelimit-requests-reset': '2025-08-04T22:50:01Z', 'anthropic-ratelimit-tokens-limit': '192000', 'anthropic-ratelimit-tokens-remaining': '192000', 'anthropic-ratelimit-tokens-reset': '2025-08-04T22:50:02Z', 'request-id': 'req_011CRoVCFNUTWPDmUoDhcPSS', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '31219faf-91cc-482b-93f4-cc5aadc25785', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '96a19c8168feac0c-YYZ', 'content-encoding': 'gzip'})
2025-08-04 18:50:06,212 - anthropic._base_client - DEBUG - request_id: req_011CRoVCFNUTWPDmUoDhcPSS
2025-08-04 18:50:06,213 - orchestrator_v2.state_management - DEBUG - Cleaned up execution state for: d9e67a3a-b05a-45b6-a52e-d819e54d09bb
2025-08-04 18:50:06,213 - orchestrator_v2.orchestrator_v2 - INFO - âœ… Execution completed with 0.40 confidence
2025-08-04 18:50:06,213 - orchestrator_integration - INFO - âœ… Orchestrator 2.0 completed with 0.40 confidence
2025-08-04 18:50:06,214 - __main__ - INFO - Added assistant response to memory - length: 1291
2025-08-04 18:50:06,214 - __main__ - INFO - Chat response generated - session: terminal-test-session, processing_time: 4529ms, correlation_id: 9c9bbdf2-7da7-4827-8e1e-a5352733b1e5
ðŸ¤– Self-awareness query detected â†’ SYSTEM_AWARENESS
ðŸ”§ SYNTHESIS DEBUG: resolved_params={'documents': {'total_workflows': 5, 'workflows': {'document_analysis': {'name': 'Document Analysis', 'description': 'Comprehensive analysis of single documents (PDF, DOCX, TXT)', 'use_cases': ['Analyze financial reports and statements', 'Extract key insights from risk assessments', 'Summarize regulatory documents', 'Answer questions about document content'], 'example_queries': ["What is the company's profitability?", 'Summarize the risk factors', 'Analyze this financial statement']}, 'data_analysis': {'name': 'Data Analysis', 'description': 'Statistical analysis of CSV and Excel files with financial calculations', 'use_cases': ['Process multi-sheet Excel financial models', 'Calculate financial ratios and metrics', 'Generate data visualizations and charts', 'Perform statistical analysis on datasets'], 'example_queries': ['Analyze this financial data', 'What are the profitability trends?', 'Create a summary of each table']}, 'multi_doc_comparison': {'name': 'Multi-Document Comparison', 'description': 'Compare and contrast multiple documents for similarities and differences', 'use_cases': ['Compare financial statements across periods', 'Analyze different company performance', 'Identify trends across multiple reports', 'Benchmark analysis between documents'], 'example_queries': ['Compare these two financial reports', 'What are the similarities and differences?', 'How do these companies compare?']}, 'memory_search': {'name': 'Memory Search', 'description': 'Search previous conversations and build on prior context', 'use_cases': ['Recall previous analysis results', 'Continue interrupted conversations', 'Reference earlier calculations', 'Build on previous insights'], 'example_queries': ['What did we discuss about risk?', 'Remember our previous analysis', 'Recall what we said about profitability']}, 'qa_fallback_chain': {'name': 'Q&A Fallback Chain', 'description': 'Answer general questions using comprehensive knowledge sources', 'use_cases': ['General financial knowledge questions', 'Technical definitions and explanations', 'Industry best practices', 'Educational content'], 'example_queries': ['What is a CET1 ratio?', 'Explain corporate finance basics', 'What are financial derivatives?']}}, 'workflow_selection': 'Automatic - based on query type and available documents', 'capabilities': 'Full orchestrator with parallel execution and state management'}, 'query': '--query what workflows do you have access to?', 'synthesis_type': 'system_awareness'}
ðŸ”§ SYNTHESIS DEBUG: available step_outputs=['get_system_info']
INFO:     127.0.0.1:61594 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:64593 - "GET /system/status HTTP/1.1" 200 OK
2025-08-04 18:57:03,579 - __main__ - INFO - Frontend Chat request - session: terminal-test-session, query: --query what tools do you have access to?, correlation_id: 66660c28-8142-4725-9c14-63fc90d4bb44
2025-08-04 18:57:03,580 - __main__ - INFO - Loaded memory context - short_term: 10, summaries: 3
2025-08-04 18:57:03,584 - orchestrator_integration - INFO - ðŸš€ Using Orchestrator 2.0
2025-08-04 18:57:03,584 - orchestrator_v2.orchestrator_v2 - INFO - ðŸš€ Orchestrator 2.0 executing query: --query what tools do you have access to?...
2025-08-04 18:57:03,584 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Execution ID: 63ec9be1-fd48-47a5-9192-c7a9c4b7923d, Strategy: adaptive
2025-08-04 18:57:03,584 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ¤” Generating execution plan...
2025-08-04 18:57:03,584 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸŽ¯ AI Finance and Risk Agent creating plan for: '--query what tools do you have access to?...'
2025-08-04 18:57:03,584 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ“‹ Classified workflow: system_awareness
2025-08-04 18:57:03,584 - orchestrator_v2.planning_engine_enhanced - INFO - ðŸ’¾ Primary memory source: knowledge_base_embeddings
2025-08-04 18:57:03,584 - orchestrator_v2.planning_engine_enhanced - INFO - âœ… Created system_awareness plan with 2 steps
2025-08-04 18:57:03,584 - orchestrator_v2.orchestrator_v2 - INFO - ðŸ“‹ Created plan with 2 steps
2025-08-04 18:57:03,584 - orchestrator_v2.orchestrator_v2 - INFO - âš¡ Starting plan execution...
2025-08-04 18:57:03,584 - orchestrator_v2.execution_engine - INFO - Starting execution of plan: system_awareness_1754348223
2025-08-04 18:57:03,584 - orchestrator_v2.execution_engine - INFO - Executing step: get_system_info (get_agent_capabilities)
2025-08-04 18:57:03,585 - tools.system_tools - INFO - Retrieving agent capabilities for self-awareness query
2025-08-04 18:57:03,585 - orchestrator_v2.execution_engine - INFO - Step 'get_system_info' completed successfully
2025-08-04 18:57:03,585 - orchestrator_v2.execution_engine - INFO - Executing step: synthesize_system_info (synthesize_content)
2025-08-04 18:57:03,585 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:57:03,585 - orchestrator_v2.execution_engine - ERROR - Step 'synthesize_system_info' failed: Parameter validation failed: ["Parameter 'documents' must be typing.List[typing.Dict], got dict"]
2025-08-04 18:57:03,585 - orchestrator_v2.execution_engine - INFO - Plan execution completed. Success: 1, Failed: 1
2025-08-04 18:57:03,585 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-f387da92-c7b5-421f-8318-e901276557a1', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '\nUser Query: "--query what tools do you have access to?"\n\nI have gathered the following information using get_agent_capabilities:\n\n{\'agent_identity\': {\'name\': \'AI Finance and Risk Agent\', \'version\': \'2.0.0\', \'specialization\': \'Financial Analysis, Risk Assessment, and Productivity\'}, \'core_capabilities\': [\'Document Analysis & Synthesis\', \'Multi-Document Financial Comparison\', \'Q&A with Comprehensive Fallback Chain\', \'Progressive Data Analysis\', \'Memory Search\', \'System Self-Awareness\'], \'workflow_types\': [\'document_analysis\', \'multi_doc_comparison\', \'qa_fallback_chain\', \'data_analysis\', \'memory_search\', \'system_awareness\'], \'memory_sources\': [\'uploaded_documents\', \'knowledge_base_embeddings\', \'long_term_conversation\', \'llm_knowledge_base\'], \'document_access\': {\'has_document_store\': True, \'total_documents\': 6, \'supported_formats\': [\'PDF\', \'DOCX\', \'TXT\', \'CSV\', \'Excel (multi-sheet)\'], \'sample_documents\': [\'20250804_165506_263c93f7-5bcb-4741-b4f2-a6d0fff1aa15_car24_chpt1_0.pdf\', \'20250804_165507_11ec1b2f-46d1-4b7a-9bb8-d9308689a671_car24_chpt7.pdf\', \'20250804_165511_9eaada37-d793-4331-9f62-5ea15b61a1be_20250801_215126_40e96e22-a0e5-41e0-a232-5f2478768aad_riskandfinace.pdf\']}, \'available_tools\': {\'document_processing\': [\'search_uploaded_docs - Search and retrieve uploaded documents\', \'upload_document - Process and store new documents (PDF, DOCX, TXT, CSV, Excel)\', \'synthesize_content - Generate analysis and summaries from documents\'], \'data_analysis\': [\'analyze_csv_data - Process and analyze CSV files\', \'analyze_excel_data - Process multi-sheet Excel files (1 sheet = 1 chunk)\', \'generate_statistics - Calculate financial metrics and ratios\', \'create_visualizations - Generate charts and graphs\'], \'financial_analysis\': [\'financial_ratio_analysis - Calculate profitability, liquidity, efficiency ratios\', \'risk_assessment - Identify and evaluate financial risks\', \'comparative_analysis - Compare multiple financial documents or datasets\'], \'memory_and_search\': [\'search_conversation_history - Access previous conversation context\', \'search_multiple_docs - Compare and analyze multiple documents simultaneously\'\n\nPlease create a comprehensive, well-structured response that directly answers the user\'s query using this information.\n\nRequirements:\n- Start with a direct answer to their question\n- Include the most relevant details from the information\n- Be concise but thorough  \n- Use a professional, helpful tone\n- Structure the response logically\n- If the information contains raw document chunks, synthesize them into readable prose\n\nFinal Response:'}], 'model': 'claude-3-5-sonnet-20241022', 'temperature': 0.0}}
2025-08-04 18:57:03,586 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-08-04 18:57:03,586 - httpcore.connection - DEBUG - close.started
2025-08-04 18:57:03,586 - httpcore.connection - DEBUG - close.complete
2025-08-04 18:57:03,586 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-08-04 18:57:03,615 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x14178d6a0>
2025-08-04 18:57:03,615 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x141725e20> server_hostname='api.anthropic.com' timeout=None
2025-08-04 18:57:03,637 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x14178d7b0>
2025-08-04 18:57:03,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-04 18:57:03,637 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-04 18:57:03,637 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-04 18:57:03,638 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-04 18:57:03,638 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-04 18:57:07,556 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 04 Aug 2025 22:57:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'160000'), (b'anthropic-ratelimit-input-tokens-remaining', b'160000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-08-04T22:57:04Z'), (b'anthropic-ratelimit-output-tokens-limit', b'32000'), (b'anthropic-ratelimit-output-tokens-remaining', b'32000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-08-04T22:57:07Z'), (b'anthropic-ratelimit-requests-limit', b'2000'), (b'anthropic-ratelimit-requests-remaining', b'1999'), (b'anthropic-ratelimit-requests-reset', b'2025-08-04T22:57:03Z'), (b'anthropic-ratelimit-tokens-limit', b'192000'), (b'anthropic-ratelimit-tokens-remaining', b'192000'), (b'anthropic-ratelimit-tokens-reset', b'2025-08-04T22:57:04Z'), (b'request-id', b'req_011CRoVjMCKwtFhRAysNswGX'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'31219faf-91cc-482b-93f4-cc5aadc25785'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96a1a6ce5ceb36fb-YYZ'), (b'Content-Encoding', b'gzip')])
2025-08-04 18:57:07,557 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-04 18:57:07,557 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-04 18:57:07,557 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-04 18:57:07,557 - httpcore.http11 - DEBUG - response_closed.started
2025-08-04 18:57:07,557 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-04 18:57:07,558 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 04 Aug 2025 22:57:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '160000', 'anthropic-ratelimit-input-tokens-remaining': '160000', 'anthropic-ratelimit-input-tokens-reset': '2025-08-04T22:57:04Z', 'anthropic-ratelimit-output-tokens-limit': '32000', 'anthropic-ratelimit-output-tokens-remaining': '32000', 'anthropic-ratelimit-output-tokens-reset': '2025-08-04T22:57:07Z', 'anthropic-ratelimit-requests-limit': '2000', 'anthropic-ratelimit-requests-remaining': '1999', 'anthropic-ratelimit-requests-reset': '2025-08-04T22:57:03Z', 'anthropic-ratelimit-tokens-limit': '192000', 'anthropic-ratelimit-tokens-remaining': '192000', 'anthropic-ratelimit-tokens-reset': '2025-08-04T22:57:04Z', 'request-id': 'req_011CRoVjMCKwtFhRAysNswGX', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '31219faf-91cc-482b-93f4-cc5aadc25785', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '96a1a6ce5ceb36fb-YYZ', 'content-encoding': 'gzip'})
2025-08-04 18:57:07,558 - anthropic._base_client - DEBUG - request_id: req_011CRoVjMCKwtFhRAysNswGX
2025-08-04 18:57:07,559 - orchestrator_v2.state_management - DEBUG - Cleaned up execution state for: 63ec9be1-fd48-47a5-9192-c7a9c4b7923d
2025-08-04 18:57:07,559 - orchestrator_v2.orchestrator_v2 - INFO - âœ… Execution completed with 0.40 confidence
2025-08-04 18:57:07,559 - orchestrator_integration - INFO - âœ… Orchestrator 2.0 completed with 0.40 confidence
2025-08-04 18:57:07,560 - __main__ - INFO - Added assistant response to memory - length: 1075
2025-08-04 18:57:07,560 - __main__ - INFO - Chat response generated - session: terminal-test-session, processing_time: 3980ms, correlation_id: 66660c28-8142-4725-9c14-63fc90d4bb44
ðŸ¤– Self-awareness query detected â†’ SYSTEM_AWARENESS
ðŸ”§ SYNTHESIS DEBUG: resolved_params={'documents': {'agent_identity': {'name': 'AI Finance and Risk Agent', 'version': '2.0.0', 'specialization': 'Financial Analysis, Risk Assessment, and Productivity'}, 'core_capabilities': ['Document Analysis & Synthesis', 'Multi-Document Financial Comparison', 'Q&A with Comprehensive Fallback Chain', 'Progressive Data Analysis', 'Memory Search', 'System Self-Awareness'], 'workflow_types': ['document_analysis', 'multi_doc_comparison', 'qa_fallback_chain', 'data_analysis', 'memory_search', 'system_awareness'], 'memory_sources': ['uploaded_documents', 'knowledge_base_embeddings', 'long_term_conversation', 'llm_knowledge_base'], 'document_access': {'has_document_store': True, 'total_documents': 6, 'supported_formats': ['PDF', 'DOCX', 'TXT', 'CSV', 'Excel (multi-sheet)'], 'sample_documents': ['20250804_165506_263c93f7-5bcb-4741-b4f2-a6d0fff1aa15_car24_chpt1_0.pdf', '20250804_165507_11ec1b2f-46d1-4b7a-9bb8-d9308689a671_car24_chpt7.pdf', '20250804_165511_9eaada37-d793-4331-9f62-5ea15b61a1be_20250801_215126_40e96e22-a0e5-41e0-a232-5f2478768aad_riskandfinace.pdf']}, 'available_tools': {'document_processing': ['search_uploaded_docs - Search and retrieve uploaded documents', 'upload_document - Process and store new documents (PDF, DOCX, TXT, CSV, Excel)', 'synthesize_content - Generate analysis and summaries from documents'], 'data_analysis': ['analyze_csv_data - Process and analyze CSV files', 'analyze_excel_data - Process multi-sheet Excel files (1 sheet = 1 chunk)', 'generate_statistics - Calculate financial metrics and ratios', 'create_visualizations - Generate charts and graphs'], 'financial_analysis': ['financial_ratio_analysis - Calculate profitability, liquidity, efficiency ratios', 'risk_assessment - Identify and evaluate financial risks', 'comparative_analysis - Compare multiple financial documents or datasets'], 'memory_and_search': ['search_conversation_history - Access previous conversation context', 'search_multiple_docs - Compare and analyze multiple documents simultaneously', 'search_knowledge_base - Access external knowledge resources']}, 'system_status': 'operational'}, 'query': '--query what tools do you have access to?', 'synthesis_type': 'system_awareness'}
ðŸ”§ SYNTHESIS DEBUG: available step_outputs=['get_system_info']
INFO:     127.0.0.1:64595 - "POST /chat HTTP/1.1" 200 OK
